<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmailValidator Pro - Email Validation & Guessing Platform</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --background: #ffffff;
            --surface: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        [data-theme="dark"] {
            --background: #0f172a;
            --surface: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --border: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .theme-toggle {
            background: none;
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--surface);
        }

        .main {
            padding: 2rem 0;
        }

        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 0.75rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            background: var(--background);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgb(37 99 235 / 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
        }

        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-upload input[type=file] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            border: 2px dashed var(--border);
            border-radius: 0.5rem;
            background: var(--background);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover .file-upload-label {
            border-color: var(--primary-color);
            background: rgb(37 99 235 / 0.05);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn:hover {
            background: var(--primary-dark);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--secondary-color);
        }

        .btn-secondary:hover {
            background: #475569;
        }

        .progress {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }

        .results-section {
            margin-top: 2rem;
        }

        .result-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .result-email {
            font-family: 'Courier New', monospace;
            font-weight: 500;
        }

        .result-confidence {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .confidence-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .confidence-high {
            background: rgb(16 185 129 / 0.1);
            color: var(--success-color);
        }

        .confidence-medium {
            background: rgb(245 158 11 / 0.1);
            color: var(--warning-color);
        }

        .confidence-low {
            background: rgb(239 68 68 / 0.1);
            color: var(--error-color);
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .status-verified {
            background: var(--success-color);
        }

        .status-possible {
            background: var(--warning-color);
        }

        .status-invalid {
            background: var(--error-color);
        }

        .advanced-settings {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: var(--success-color);
        }

        .notification.error {
            background: var(--error-color);
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .csv-preview {
            margin-top: 1rem;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
        }

        .csv-table {
            width: 100%;
            border-collapse: collapse;
        }

        .csv-table th,
        .csv-table td {
            padding: 0.5rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .csv-table th {
            background: var(--surface);
            font-weight: 500;
        }

        .export-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .export-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-envelope-check"></i>
                    EmailValidator Pro
                </div>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="main">
        <div class="container">
            <div class="card">
                <h2>Email Validation & Guessing Platform</h2>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">
                    Find and validate email addresses using 30 different pattern combinations with advanced verification.
                </p>

                <form id="emailForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" class="form-input" placeholder="John" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" class="form-input" placeholder="Doe" required>
                        </div>
                        <div class="form-group">
                            <label for="domain">Domain</label>
                            <input type="text" id="domain" class="form-input" placeholder="company.com" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>CSV Upload (Optional)</label>
                        <div class="file-upload">
                            <input type="file" id="csvFile" accept=".csv" />
                            <div class="file-upload-label">
                                <i class="fas fa-cloud-upload-alt" style="margin-right: 0.5rem;"></i>
                                Drag and drop CSV file or click to browse (max 1MB)
                            </div>
                        </div>
                        <div id="csvPreview" class="csv-preview" style="display: none;"></div>
                    </div>

                    <div class="advanced-settings" id="advancedSettings">
                        <div class="checkbox-group">
                            <input type="checkbox" id="advancedVerification">
                            <label for="advancedVerification">Enable Advanced Catch-All Verification (slower but more accurate)</label>
                        </div>
                    </div>

                    <button type="submit" class="btn" id="submitBtn">
                        <i class="fas fa-search"></i>
                        Start Validation
                    </button>
                </form>
            </div>

            <div id="progressSection" style="display: none;">
                <div class="card">
                    <h3>Validation Progress</h3>
                    <div class="progress">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <p id="progressText">Starting validation...</p>
                </div>
            </div>

            <div id="resultsSection" class="results-section" style="display: none;">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3>Validation Results</h3>
                        <div class="export-buttons">
                            <button class="btn btn-secondary" id="copyResults">
                                <i class="fas fa-copy"></i>
                                Copy Results
                            </button>
                            <button class="btn btn-secondary" id="exportCSV">
                                <i class="fas fa-download"></i>
                                Export CSV
                            </button>
                        </div>
                    </div>
                    <div id="resultsContainer"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Email pattern generators
        const EMAIL_PATTERNS = [
            (f, l, d) => `${f}@${d}`,
            (f, l, d) => `${f[0]}.${l}@${d}`,
            (f, l, d) => `${f}.${l}@${d}`,
            (f, l, d) => `${f[0]}${l}@${d}`,
            (f, l, d) => `${f}${l}@${d}`,
            (f, l, d) => `${l}@${d}`,
            (f, l, d) => `${l}.${f}@${d}`,
            (f, l, d) => `${f[0]}_${l}@${d}`,
            (f, l, d) => `${f}_${l}@${d}`,
            (f, l, d) => `${f}-${l}@${d}`,
            (f, l, d) => `${f[0]}-${l}@${d}`,
            (f, l, d) => `${l}${f}@${d}`,
            (f, l, d) => `${f}.${l[0]}@${d}`,
            (f, l, d) => `${f[0]}${l[0]}@${d}`,
            (f, l, d) => `${f}+${l}@${d}`,
            (f, l, d) => `${f}123@${d}`,
            (f, l, d) => `${f}1@${d}`,
            (f, l, d) => `${f}.${l}1@${d}`,
            (f, l, d) => `${f}.${l}123@${d}`,
            (f, l, d) => `${l}.${f[0]}@${d}`,
            (f, l, d) => `${l}.${f}@${d}`,
            (f, l, d) => `${l}_${f}@${d}`,
            (f, l, d) => `${f}.${f[0]}.${l}@${d}`,
            (f, l, d) => `${f}${l}1@${d}`,
            (f, l, d) => `${f}.${l}.work@${d}`,
            (f, l, d) => `${f}.${l}.email@${d}`,
            (f, l, d) => `contact.${f}@${d}`,
            (f, l, d) => `${f}.contact@${d}`,
            (f, l, d) => `admin.${f}@${d}`,
            (f, l, d) => `${f}.admin@${d}`
        ];

        // Global variables
        let validationResults = [];
        let currentValidation = null;
        let csvData = [];

        // Theme management
        const themeToggle = document.getElementById('themeToggle');
        const currentTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', currentTheme);
        updateThemeIcon(currentTheme);

        themeToggle.addEventListener('click', () => {
            const current = document.documentElement.getAttribute('data-theme');
            const newTheme = current === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });

        function updateThemeIcon(theme) {
            const icon = themeToggle.querySelector('i');
            icon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        }

        // CSV file handling
        document.getElementById('csvFile').addEventListener('change', handleCSVUpload);

        function handleCSVUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (file.size > 1024 * 1024) {
                showNotification('File size must be less than 1MB', 'error');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const csv = parseCSV(e.target.result);
                    csvData = csv;
                    showCSVPreview(csv);
                } catch (error) {
                    showNotification('Error parsing CSV file', 'error');
                }
            };
            reader.readAsText(file);
        }

        function parseCSV(text) {
            const lines = text.split('\n').filter(line => line.trim());
            if (lines.length === 0) return [];

            const headers = lines[0].split(',').map(h => h.trim().toLowerCase());
            const data = [];

            // Map flexible column names
            const firstNameIndex = headers.findIndex(h => 
                h.includes('first') || h === 'firstname' || h === 'fname'
            );
            const lastNameIndex = headers.findIndex(h => 
                h.includes('last') || h === 'lastname' || h === 'lname'
            );
            const domainIndex = headers.findIndex(h => 
                h.includes('domain') || h.includes('company') || h === 'email'
            );

            for (let i = 1; i < Math.min(lines.length, 101); i++) { // Limit to 100 entries
                const values = lines[i].split(',').map(v => v.trim());
                if (values.length >= 3) {
                    data.push({
                        firstName: values[firstNameIndex] || '',
                        lastName: values[lastNameIndex] || '',
                        domain: values[domainIndex] || ''
                    });
                }
            }

            return data;
        }

        function showCSVPreview(data) {
            const preview = document.getElementById('csvPreview');
            const previewData = data.slice(0, 5);
            
            let html = '<table class="csv-table"><thead><tr><th>First Name</th><th>Last Name</th><th>Domain</th></tr></thead><tbody>';
            previewData.forEach(row => {
                html += `<tr><td>${row.firstName}</td><td>${row.lastName}</td><td>${row.domain}</td></tr>`;
            });
            html += '</tbody></table>';
            html += `<p style="padding: 0.5rem; font-size: 0.875rem; color: var(--text-secondary);">
                Showing ${previewData.length} of ${data.length} entries
            </p>`;
            
            preview.innerHTML = html;
            preview.style.display = 'block';
        }

        // Form submission
        document.getElementById('emailForm').addEventListener('submit', handleFormSubmit);

        async function handleFormSubmit(event) {
            event.preventDefault();
            
            const firstName = document.getElementById('firstName').value.trim().toLowerCase();
            const lastName = document.getElementById('lastName').value.trim().toLowerCase();
            const domain = document.getElementById('domain').value.trim().toLowerCase();
            const advancedVerification = document.getElementById('advancedVerification').checked;

            if (csvData.length > 0) {
                // Process CSV data
                await processBulkValidation(csvData, advancedVerification);
            } else if (firstName && lastName && domain) {
                // Process single entry
                await processSingleValidation(firstName, lastName, domain, advancedVerification);
            } else {
                showNotification('Please fill in all fields or upload a CSV file', 'error');
            }
        }

        async function processSingleValidation(firstName, lastName, domain, advanced) {
            showProgressSection();
            hideResultsSection();
            
            validationResults = [];
            await validateEmailPatterns(firstName, lastName, domain, advanced);
            
            displayResults();
            hideProgressSection();
        }

        async function processBulkValidation(data, advanced) {
            showProgressSection();
            hideResultsSection();
            
            validationResults = [];
            
            for (let i = 0; i < data.length; i++) {
                const entry = data[i];
                if (entry.firstName && entry.lastName && entry.domain) {
                    updateProgress((i / data.length) * 100, `Processing ${i + 1} of ${data.length}...`);
                    
                    const results = await validateEmailPatterns(
                        entry.firstName.toLowerCase(),
                        entry.lastName.toLowerCase(),
                        entry.domain.toLowerCase(),
                        advanced,
                        false // Don't update UI for each entry
                    );
                    
                    validationResults.push(...results);
                }
            }
            
            displayResults();
            hideProgressSection();
        }

        async function validateEmailPatterns(firstName, lastName, domain, advanced, updateUI = true) {
            const results = [];
            const totalPatterns = EMAIL_PATTERNS.length;
            
            for (let i = 0; i < totalPatterns; i++) {
                if (updateUI) {
                    updateProgress((i / totalPatterns) * 100, `Testing pattern ${i + 1} of ${totalPatterns}...`);
                }
                
                const email = EMAIL_PATTERNS[i](firstName, lastName, domain);
                const validation = await validateEmail(email, advanced);
                
                results.push({
                    email,
                    pattern: i + 1,
                    ...validation,
                    firstName,
                    lastName,
                    domain
                });
                
                // Small delay for better UX
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            // Sort by confidence score
            results.sort((a, b) => b.confidence - a.confidence);
            
            if (updateUI) {
                validationResults = results;
            }
            
            return results;
        }

        async function validateEmail(email, advanced) {
            // Simulate comprehensive email validation
            const validation = {
                syntax: isValidEmailSyntax(email),
                domain: await validateDomain(email.split('@')[1]),
                smtp: await simulateSMTPValidation(email),
                catchAll: false,
                confidence: 0,
                status: 'invalid',
                responseTime: Math.random() * 500 + 100 // Simulate response time
            };

            // Calculate confidence based on validation results
            let confidence = 0;
            
            if (validation.syntax) confidence += 20;
            if (validation.domain) confidence += 30;
            if (validation.smtp) confidence += 40;
            
            // Pattern-based confidence boost
            const patternBonus = getPatternConfidenceBonus(email);
            confidence += patternBonus;
            
            // Advanced catch-all verification
            if (advanced && validation.domain) {
                const catchAllResult = await advancedCatchAllVerification(email);
                validation.catchAll = catchAllResult.isCatchAll;
                
                if (catchAllResult.isCatchAll) {
                    confidence = Math.min(confidence * 0.7, 70); // Reduce confidence for catch-all
                    validation.status = 'possible';
                } else if (validation.smtp) {
                    validation.status = 'verified';
                }
            } else if (validation.smtp && validation.domain) {
                validation.status = 'verified';
            }
            
            validation.confidence = Math.round(Math.max(0, Math.min(100, confidence)));
            
            return validation;
        }

        function isValidEmailSyntax(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        async function validateDomain(domain) {
            // Simulate domain validation with common domains
            const commonDomains = [
                'gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com',
                'company.com', 'example.com', 'test.com', 'demo.com'
            ];
            
            await new Promise(resolve => setTimeout(resolve, 200)); // Simulate API call
            return commonDomains.includes(domain) || Math.random() > 0.3;
        }

        async function simulateSMTPValidation(email) {
            await new Promise(resolve => setTimeout(resolve, 300)); // Simulate SMTP check
            return Math.random() > 0.4; // 60% success rate for simulation
        }

        function getPatternConfidenceBonus(email) {
            // Give bonus points based on common email patterns
            if (email.includes('.')) return 10;
            if (email.match(/^\w+@/)) return 8;
            if (email.includes('_') || email.includes('-')) return 5;
            return 0;
        }

        async function advancedCatchAllVerification(email) {
            const domain = email.split('@')[1];
            
            // Simulate advanced catch-all detection
            await new Promise(resolve => setTimeout(resolve, 500));
            
            const catchAllDomains = ['example.com', 'test.com', 'demo.com'];
            const isCatchAll = catchAllDomains.includes(domain) || Math.random() > 0.8;
            
            return {
                isCatchAll,
                confidence: isCatchAll ? Math.random() * 40 + 30 : Math.random() * 30 + 70
            };
        }

        function showProgressSection() {
            document.getElementById('progressSection').style.display = 'block';
            updateProgress(0, 'Starting validation...');
        }

        function hideProgressSection() {
            document.getElementById('progressSection').style.display = 'none';
        }

        function showResultsSection() {
            document.getElementById('resultsSection').style.display = 'block';
        }

        function hideResultsSection() {
            document.getElementById('resultsSection').style.display = 'none';
        }

        function updateProgress(percentage, text) {
            document.getElementById('progressBar').style.width = `${percentage}%`;
            document.getElementById('progressText').textContent = text;
        }

        function displayResults() {
            const container = document.getElementById('resultsContainer');
            
            if (validationResults.length === 0) {
                container.innerHTML = '<p>No results found.</p>';
                showResultsSection();
                return;
            }
            
            let html = '';
            validationResults.forEach(result => {
                const confidenceClass = getConfidenceClass(result.confidence);
                const statusClass = `status-${result.status}`;
                
                html += `
                    <div class="result-item">
                        <div style="display: flex; align-items: center;">
                            <div class="status-indicator ${statusClass}"></div>
                            <div class="result-email">${result.email}</div>
                        </div>
                        <div class="result-confidence">
                            <div class="confidence-badge ${confidenceClass}">
                                ${result.confidence}%
                            </div>
                            <span style="font-size: 0.875rem; color: var(--text-secondary);">
                                Pattern ${result.pattern}
                            </span>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            showResultsSection();
        }

        function getConfidenceClass(confidence) {
            if (confidence >= 70) return 'confidence-high';
            if (confidence >= 40) return 'confidence-medium';
            return 'confidence-low';
        }

        // Export functionality
        document.getElementById('copyResults').addEventListener('click', copyResults);
        document.getElementById('exportCSV').addEventListener('click', exportCSV);

        function copyResults() {
            const text = validationResults
                .map(r => `${r.email} - ${r.confidence}% (Pattern ${r.pattern})`)
                .join('\n');
            
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Results copied to clipboard!', 'success');
            });
        }

        function exportCSV() {
            const headers = ['Email', 'Confidence', 'Pattern', 'Status', 'First Name', 'Last Name', 'Domain'];
            const rows = validationResults.map(r => [
                r.email,
